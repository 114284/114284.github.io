<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è¨˜æ†¶ç¿»ç‰ŒéŠæˆ²</title>
  <link rel="icon" type="image/png" href="icon.png" />
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; text-align:center; }
    h1 { margin-top:20px; }
    #controls { margin: 10px; }
    .board {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      gap: 10px;
      justify-content: center;
      margin: 20px auto;
    }
    .card {
      width: 100px;
      height: 120px;
      background: #444;
      color: transparent;
      font-size: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
    }
    .card.open { background:#fff; color:#000; cursor: default; }
    .card.taken { visibility: hidden; }
    #status, #score { margin-top:10px; font-size:18px; }
  </style>
</head>
<body>
  <h1>è¨˜æ†¶ç¿»ç‰ŒéŠæˆ²</h1>

  <div id="controls">
    <button id="singleBtn">å–®äººæ¨¡å¼</button>
    <button id="doubleBtn">é›™äººæ¨¡å¼</button>
  </div>

  <div id="status">è«‹é¸æ“‡æ¨¡å¼</div>
  <div id="score"></div>
  <div class="board" id="board"></div>

  <script>
    const animals = ['ğŸŒ¸','ğŸ¦Œ','ğŸ€','ğŸ¦Š','ğŸ¦‹','ğŸ‡','ğŸ¬','ğŸ'];
    let cards = [];
    let opened = [];
    let currentPlayer = 1;
    let scores = {1:0, 2:0};
    let playerNames = {1:'ç©å®¶', 2:'é›»è…¦'};
    let mode = 'single';
    let lock = false;

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function startGame(selectedMode) {
      mode = selectedMode;
      currentPlayer = 1;
      scores = {1:0, 2:0};
      opened = [];
      lock = false;

      if (mode === 'single') {
        const n1 = prompt('è«‹è¼¸å…¥ç©å®¶åç¨±ï¼š', 'ç©å®¶');
        playerNames[1] = n1 && n1.trim() ? n1 : 'ç©å®¶';
        playerNames[2] = 'é›»è…¦';
      } else {
        const n1 = prompt('è«‹è¼¸å…¥ç©å®¶1åç¨±ï¼š', 'ç©å®¶1');
        const n2 = prompt('è«‹è¼¸å…¥ç©å®¶2åç¨±ï¼š', 'ç©å®¶2');
        playerNames[1] = n1 && n1.trim() ? n1 : 'ç©å®¶1';
        playerNames[2] = n2 && n2.trim() ? n2 : 'ç©å®¶2';
      }

      cards = shuffle([...animals, ...animals]);
      const board = document.getElementById('board');
      board.innerHTML = '';

      cards.forEach(animal => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.animal = animal;
        card.textContent = animal;
        card.addEventListener('click', () => flip(card));
        board.appendChild(card);
      });

      updateStatus();
      updateScore();
    }

    function flip(card) {
      if (lock || card.classList.contains('open') || card.classList.contains('taken')) return;
      card.classList.add('open');
      opened.push(card);
      if (opened.length === 2) {
        lock = true;
        setTimeout(checkMatch, 700);
      }
    }

    function checkMatch() {
      const [a, b] = opened;
      if (a.dataset.animal === b.dataset.animal) {
        a.classList.add('taken');
        b.classList.add('taken');
        scores[currentPlayer]++;
        opened = [];
        lock = false;
        updateScore();
        checkGameOver();
        if (mode === 'single' && currentPlayer === 2) {
          setTimeout(computerTurn, 600);
        }
      } else {
        a.classList.remove('open');
        b.classList.remove('open');
        opened = [];
        switchPlayer();
      }
    }

    function switchPlayer() {
      currentPlayer = currentPlayer === 1 ? 2 : 1;
      updateStatus();
      lock = false;
      if (mode === 'single' && currentPlayer === 2) {
        setTimeout(computerTurn, 600);
      }
    }

    function computerTurn() {
      if (lock) return;
      const available = [...document.querySelectorAll('.card:not(.open):not(.taken)')];
      if (available.length < 2) {
        switchPlayer();
        return;
      }

      lock = true;
      const c1 = available[Math.floor(Math.random()*available.length)];
      c1.classList.add('open');
      opened = [c1];

      setTimeout(() => {
        const rest = available.filter(c => c !== c1);
        const c2 = rest[Math.floor(Math.random()*rest.length)];
        c2.classList.add('open');
        opened.push(c2);

        setTimeout(() => {
          if (c1.dataset.animal === c2.dataset.animal) {
            c1.classList.add('taken');
            c2.classList.add('taken');
            scores[2]++;
            opened = [];
            lock = false;
            updateScore();
            checkGameOver();
            setTimeout(computerTurn, 600);
          } else {
            c1.classList.remove('open');
            c2.classList.remove('open');
            opened = [];
            lock = false;
            switchPlayer();
          }
        }, 700);
      }, 600);
    }

    function updateStatus() {
      document.getElementById('status').textContent = `ç›®å‰å›åˆï¼š${playerNames[currentPlayer]}`;
    }

    function updateScore() {
      document.getElementById('score').textContent =
        `${playerNames[1]}ï¼š${scores[1]} å° ï½œ ${playerNames[2]}ï¼š${scores[2]} å°`;
    }

    function checkGameOver() {
      const remain = document.querySelectorAll('.card:not(.taken)');
      if (remain.length === 0) {
        let result = 'å¹³æ‰‹ï¼';
        if (scores[1] > scores[2]) result = playerNames[1] + ' å‹åˆ©ï¼';
        else if (scores[2] > scores[1]) result = playerNames[2] + ' å‹åˆ©ï¼';
        document.getElementById('status').textContent = result;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('singleBtn').addEventListener('click', () => startGame('single'));
        document.getElementById('doubleBtn').addEventListener('click', () => startGame('double')    );
  });
</script>
</body>
</html>
